<div app-check-in-error class="alert alert--icon error tab-pane_alert" *ngIf="validation"></div>

<p class="tab-pane_lead-in">Obtén tus tarjetas de embarque para subir al avión: podrás imprimirlas o descargarlas en tu móvil.</p>

<div class="tab-pane_options-container">
   <div class="form-checkbox--button" (click)="showEmail()">
      <label>
        <input type="radio" name="typeCheckin" [checked]="dataCheckIn.checkInWithEmail" hidden>
        <span>Email del comprador</span>
      </label>
   </div>
   <div class="form-checkbox--button" (click)="showOriginDestination()">
      <label>
        <input type="radio" name="typeCheckin" [checked]="dataCheckIn.checkInWithOriginDestination" hidden>
        <span>Origen/Destino</span>
      </label>
   </div>
</div>

<form class="form" (ngSubmit)="onSubmit(checkInform)" #checkInform="ngForm" novalidate>
  <div class="form-group" [ngClass]="{'form-group--destinations': dataCheckIn.checkInWithOriginDestination, 'form-group--email': !dataCheckIn.checkInWithOriginDestination}">
    <div class="form-input" [ngClass]="{'reservation-code': dataCheckIn.checkInWithOriginDestination, 'error': validation && (codeBookingCheckin.errors?.required || codeBookingCheckin.errors?.pattern)}">
      <label>Código de reserva</label>
      <a href="#">¿Qué es?</a>
      <div class="input-group">
        <input
          type="text"
          id="codeBookingCheckIn"
          name="codeBookingCheckin"
          class="form-control"
          placeholder="Ej. XG6LM3"
          pattern="[A-Za-z0-9]{6}"
          ngModel
          [(ngModel)]="dataCheckIn.codeBooking"
          #codeBookingCheckin
          required>
      </div>
      <div class="popover popover--error" *ngIf="validation && codeBookingCheckin.errors?.required">
        <div class="popover-content">Debes completar este campo.</div>
      </div>
      <div class="popover popover--error" *ngIf="validation && codeBookingCheckin.errors?.pattern">
        <div class="popover-content">Ingrese un codigo de reserva valido.</div>
      </div>
    </div>

    <div class="form-input" *ngIf="dataCheckIn.checkInWithEmail" [ngClass]="{'error': validation && emailCheckin.errors?.required}">
      <label>Email del comprador </label>
      <div class="input-group">
        <input
          type="email"
          id="emailCheckIn"
          name="emailCheckin"
          class="form-control"
          placeholder="email@vueling.com"
          pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$"
          ngModel
          [(ngModel)]="dataCheckIn.email"
          #emailCheckin
          required>
      </div>
      <div class="popover popover--error" *ngIf="validation && emailCheckin.errors?.required">
        <div class="popover-content">Debes completar este campo.</div>
      </div>
      <div class="popover popover--error" *ngIf="validation && emailCheckin.errors?.pattern">
        <div class="popover-content">Los datos introducidos no son correctos.</div>
      </div>
    </div>
    <div class="form-input" *ngIf="dataCheckIn.checkInWithOriginDestination" [ngClass]="{'focused-bottom-arrow': isFocusedStation, 'error': validation && stationCheckin.errors?.required}">
      <label>Aeropuerto origen/destino</label>
      <div class="input-group">
        <input id="airportCheckIn"
          type="text"
          name="stationCheckin"
          class="form-control"
          placeholder="Ciudad"
          (click)="showStation()"
          (keyup)="filterStationsByKey(stationCheckin.value)"
          ngModel
          [(ngModel)]="dataCheckIn.originOrDestinationName"
          #stationCheckin
          required>
      </div>
      <div class="popover popover--error" *ngIf="validation && stationCheckin.errors?.required">
        <div class="popover-content">Debes completar este campo.</div>
      </div>
      <div id="origin-sugestion-popup" class="searchbar-popup cities-sugestion-popup" [ngClass]="{'show': selectorService.viewPopup}">
        <div app-places
          [label]="'allAirports'"
          [data]="selectorService.listStations$"
          (selectedEvent)="stationSelected($event)">
        </div>
      </div>
    </div>
    <div class="form-input dates" *ngIf="dataCheckIn.checkInWithOriginDestination" [ngClass]="{'focused-bottom-arrow': isFocusedCalendar, 'error': validation && datePickerCheckin.datePicker.errors?.required}">
      <div app-date-picker
        #datePickerCheckin
        class="col col-md-6"
        [label]="'Fecha del primer vuelo'"
        [inputId]="'inputDatePickerCheckIn'"
        [currentDate]="dataCheckIn.date"
        [validation]="validation"
        [format]="'dd/MM/yyyy'"
        (click)="showCalendar()"
        (selectedDate)="selectedDate($event)">
      </div>
      <div class="col col-md-6">
        <div class="form-checkbox--button" (click)="myFlightTomorrow()">
          <label>
            <input class="js-multiple-destinations" type="checkbox" hidden>
            <span>Mi vuelo es mañana</span>
        </label>
        </div>
      </div>
    </div>
  </div>
  <div class="form-action">
    <button type="submit" class="mv_button color-darkGrey size-md icon icon-right">Acceder</button>
  </div>
</form>
