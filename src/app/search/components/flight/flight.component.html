<form autocomplete="off" #searchFlight="ngForm" class="pane-wrapper" (ngSubmit)="submit(searchFlight)" novalidate>
  <div class="form-group form-group--flight-search">
     <div id="form-group--origin" class="form-input origin" [ngClass]="{'focused':originPopup}">
        <label for="origin-input">Origen</label>
        <div class="input-group" (click)="clearInputOrigin()">
          <span class="prefix" *ngIf="dataFlight.origin.code">{{dataFlight.origin.code}}</span>
            <input type="text" id="origin-input"
              [(ngModel)]="dataFlight.origin.name"
              (keyup)="getStations(origin.value); originPopup = true;"
              name="origin"
              #origin="ngModel"
              class="form-control js-searchbar-input"
              placeholder="Ciudad, país o aeropuerto"
              required
            >
        </div>

        <div class="popover popover--error" *ngIf="false">
          <div class="popover-content">Before continiung, you must select your origin.</div>
        </div>

        <div id="origin-sugestion-popup" class="searchbar-popup cities-sugestion-popup" [ngClass]="{'show':originPopup}">
           <p class="cities-sugestion-popup_title">Búsquedas recientes <span class="erase-label">Borrar</span></p>
           <ul class="cities-sugestion-popup_list">
              <li *ngFor="let resent of stationResent$ | async" (click)="originSelected(resent)">
                <p class="list-item">{{resent?.name}}</p>
                <p class="list-item">{{resent?.countryName}}</p>
                <p class="list-item">{{resent?.code}}</p>
                <p class="list-item"><span class="icon icon-arrow-list"></span></p>
              </li>
            </ul>

           <p class="cities-sugestion-popup_title">Todos los aeropuertos</p>
           <ul class="cities-sugestion-popup_list">
              <li *ngFor="let origin of stations$ | async" (click)="originSelected(origin)">
                <p class="list-item">{{origin?.name}}</p>
                <p class="list-item">{{origin?.countryName}}</p>
                <p class="list-item">{{origin?.code}}</p>
              </li>
            </ul>
        </div>
     </div>

     <div id="form-group--destination" class="form-input destination" [ngClass]="{'focused':destinationPopup}">
      <label for="destination-input">Destino</label>
      <div class="input-group" (click)="clearInputDestination()">
        <span class="prefix" *ngIf="dataFlight.destination.code">{{dataFlight.destination.code}}</span>
        <input type="text" id="destination-input"
              [(ngModel)]="dataFlight.destination.name"
              name="destination"
              #destination="ngModel"
              class="form-control js-searchbar-input"
              placeholder="Ciudad, país o aeropuerto"
              required
        >
      </div>

      <div class="popover popover--error" *ngIf="false">
          <div class="popover-content">Before continiung, you must select your destination</div>
      </div>

      <div id="origin-sugestion-popup" class="searchbar-popup cities-sugestion-popup" [ngClass]="{'show':destinationPopup}">
        <p class="cities-sugestion-popup_title">Búsquedas recientes <span class="erase-label">Borrar</span></p>
        <ul class="cities-sugestion-popup_list">
          <li *ngFor="let resent of destinationsResent$ | async" (click)="destinationSelected(resent)">
            <p class="list-item">{{resent?.station.name}}</p>
            <p class="list-item">{{resent?.station.countryName}}</p>
            <p class="list-item">{{resent?.station.code}}</p>
            <p class="list-item"><span class="icon icon-arrow-list"></span></p>
          </li>
        </ul>

        <p class="cities-sugestion-popup_title">Todos los aeropuertos</p>
        <ul class="cities-sugestion-popup_list">
          <li *ngFor="let destination of destinations$ | async" (click)="destinationSelected(destination)">
            <p class="list-item">{{destination?.station.name}}</p>
            <p class="list-item">{{destination?.station.countryName}}</p>
            <p class="list-item">{{destination?.station.code}}</p>
          </li>
        </ul>
        <div class="cities-sugestion-popup_legend">
          <ul>
            <li>Vuelos directos</li>
            <li>Vuelos en conexión</li>
          </ul>
          <div class="cities-sugestion-popup_legend_actions">
            <div class="link">
              <span class="icon icon-arrow-right"></span>
            <a href="">Mapa de destinos</a>
          </div>
          <div class="form-checbox--button color-darkGrey">
             <label>
                <input type="checkbox" hidden>
                <span>Múltiples destinos</span>
              </label>
            </div>
          </div>
        </div>
      </div>

    </div>

    <div id="form-group--dates" class="form-input dates">
        <div class="col col-md-6">
          <label for="dates-input--from">Ida</label>
          <div class="input-group">
            <input type="text" id="dates-input--from" class="form-control js-searchbar-input js-searchbar-date-input"
                   placeholder="DD/MM/YY"
                   [ngModel]="dataFlight.going | date:'dd/MM/yy'"
                   name="going"
                   readonly="readonly"
            >
            <span class="icon icon-calendar"><span class="path1"></span><span class="path2"></span><span class="path3"></span></span>
          </div>
        </div>
        <div class="col col-md-6">
          <label for="dates-input--to">Vuelta</label>
          <div class="input-group">
            <input type="text" id="dates-input--to" class="form-control js-searchbar-input js-searchbar-date-input"
                   placeholder="DD/MM/YY"
                   [ngModel]="dataFlight.return | date:'dd/MM/yy'"
                   name="return"
                   readonly="readonly"
            >
            <span class="icon icon-calendar"><span class="path1"></span><span class="path2"></span><span class="path3"></span></span>
          </div>
        </div>
      </div>

      <div id="form-group--passengers" class="form-input passengers">
        <label for="passengers-input">{{dataFlight.passenger.adult}} Adult, {{dataFlight.passenger.children}} Children, {{dataFlight.passenger.babies}} babies</label>
        <div class="input-group">
          <input type="text" class="form-control js-searchbar-input" id="passengers-input"
                 [ngModel]="dataFlight.passenger.totalPassengers"
                 name="totalPassengers"
                 placeholder=""
                 readonly="readonly"
          >
          <span class="icon icon-arrow-down"></span>
        </div>
        <app-passenger [passenger]="dataFlight.passenger"></app-passenger>
      </div>
  </div>

  <div class="form-action">
    <button [disabled]="searchFlight.invalid" class="mv_button color-darkGrey size-md icon icon-right">Buscar</button>
  </div>
</form>
